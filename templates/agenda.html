<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="initial-scale=1, width=device-width" />

  <!-- http://getbootstrap.com/docs/5.3/ -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
  <link href="/static/styles.css" rel="stylesheet" />
  <title>Gavel Club Agenda Manager</title>
  <link href="/static/favicon.ico" rel="icon" />
</head>

<body>
  <h1 class="title">Agenda Autocreator</h1>
  <div class="container">
    {% block main %}{% endblock %} <br>
    <table class="table table-striped table-hover table-bordered" id="agenda">
      <thead>
        <tr>
        </tr>
      </thead>
      <tbody class="table-group-divider">
        <tr>
        </tr>
      </tbody>
    </table>
  </div>
  <div class="container">
    <p style="text-align: center;">
      This is an role suggestion tool. It will dynamically generate a meeting agenda's roles by prioritizing those who
      haven't
      filled a particular role recently. Please note that these are <em>ONLY SUGGESTIONS.</em> To use, press the
      <strong>Generate</strong> button, and
      to lock in role assignments, press the <strong>Finalize</strong> button.
    </p>
    <br>
    <div class="container text-center">
      <div class="row">
        <div class="col">
          <form action="/agenda" method="post">
            <button class="btn btn-primary btn-lg">Generate</button>
          </form>
        </div>
        <div class="col">
          <form action="/lock-in" method="post">
            <button class="btn btn-secondary btn-lg">Finalize</button>
          </form>
        </div>
      </div>
    </div>
  </div>
  <script>
    async function loadCSV() {
      const response = await fetch("/static/temp.csv"); // Make sure the CSV file is in the same directory or adjust path
      const csvText = await response.text();

      const rows = csvText.trim().split("\n");
      const table = document.getElementById("agenda");
      const theadRow = table.querySelector("thead tr");
      const tbody = table.querySelector("tbody");

      // Parse header (first line)
      const headers = rows[0].split(",");
      headers.forEach((header) => {
        const th = document.createElement("th");
        th.textContent = header;
        theadRow.appendChild(th);
      });

      // Parse rows and create table body
      for (let i = 1; i < rows.length; i++) {
        const tr = document.createElement("tr");
        const cells = rows[i].split(",");
        cells.forEach((cell) => {
          const td = document.createElement("td");
          td.textContent = cell;
          tr.appendChild(td);
        });
        tbody.appendChild(tr);
      }
    }

    loadCSV();
  </script>
</body>

</html>